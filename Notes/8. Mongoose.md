## ðŸ”¹ What is Mongoose?

- Mongoose is an **ODM (Object Data Modeling)** library for MongoDB and Node.js.
- It helps define **schemas** for MongoDB documents and provides methods to interact with the database easily.

---

## ðŸ”¹ What is a Schema?

- A **Schema** defines the **structure** of a document inside a MongoDB collection.
- It sets:
  - Field names and data types (String, Number, Date, ObjectId, etc.)
  - Field validations (`required`, `default`, `enum`, etc.)
  - Relationships (via `ref` for references)
- **Schemas are blueprints only** â€” they **don't** interact with the database by themselves.

### ðŸ›  Example:

```javascript
const messageSchema = new mongoose.Schema(
  {
    senderId: {
      type: mongoose.Schema.Types.ObjectId,
      ref: "User",
      required: true,
    },
    text: { type: String, required: true },
  },
  { timestamps: true }
);
```

---

## ðŸ”¹ What is a Model?

- A **Model** is a **constructor function** created from a schema.
- It **represents a MongoDB collection**.
- It provides methods to:
  - Create documents (`save`, `create`)
  - Read documents (`find`, `findById`)
  - Update documents (`updateOne`, `findByIdAndUpdate`)
  - Delete documents (`deleteOne`, `findByIdAndDelete`)

### ðŸ›  Example:

```javascript
const Chat = mongoose.model("Chat", chatSchema);
```

- `Chat` is a model built using `chatSchema`.
- Now you can do `Chat.find()`, `Chat.create()`, etc.

---

## ðŸ”¹ How to Define Arrays in Schemas

When defining arrays in Mongoose schemas, you **must define the type** of elements inside the array.

### 1. Array of Primitive Types

```javascript
hobbies: [String]; // Array of strings
```

or with extra options:

```javascript
hobbies: {
  type: [String],
  required: true
}
```

---

### 2. Array of References (ObjectId)

```javascript
participants: [
  { type: mongoose.Schema.Types.ObjectId, ref: "User", required: true },
];
```

- Array of `ObjectId`s referring to the `User` model.

---

### 3. Array of Subdocuments (Embedded Schemas)

```javascript
messages: [messageSchema];
```

- Array of objects following the `messageSchema` structure.

---

## ðŸ”¹ Key Differences: Schema vs Model

| Schema                                         | Model                                                    |
| :--------------------------------------------- | :------------------------------------------------------- |
| Defines the structure and rules for documents. | Provides an interface to interact with the database.     |
| No direct database interaction.                | Performs Create, Read, Update, Delete (CRUD) operations. |
| Used to create a model.                        | Created using a schema.                                  |

---

# âœ¨ Final Example Summary

```javascript
const messageSchema = new mongoose.Schema(
  {
    senderId: {
      type: mongoose.Schema.Types.ObjectId,
      ref: "User",
      required: true,
    },
    text: { type: String, required: true },
  },
  { timestamps: true }
);

const chatSchema = new mongoose.Schema({
  participants: [
    { type: mongoose.Schema.Types.ObjectId, ref: "User", required: true },
  ],
  messages: [messageSchema],
});

const Chat = mongoose.model("Chat", chatSchema);

module.exports = { Chat };
```

---

# âœ… Tips:

- Always define the type inside arrays in Mongoose.
- Schemas help maintain structure and validation.
- Models are used for actual database operations.

---
